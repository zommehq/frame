= String Utilities

Helper functions for string case conversion used internally by Fragment Frame.

== Overview

The string-utils module provides functions for converting between different string case formats (kebab-case, camelCase, etc.). These utilities are primarily used internally for:

* Converting HTML attribute names (kebab-case) to JavaScript property names (camelCase)
* Converting event names between formats
* Normalizing property names for consistent handling

== Import

[source,typescript]
----
import { kebabCase, camelCase } from '@zomme/fragment-frame';
----

== Functions

=== `kebabCase(str)`

Convert any string format to kebab-case.

**Handles:**
* camelCase → kebab-case
* PascalCase → kebab-case
* snake_case → kebab-case
* Spaces → hyphens
* Dots → hyphens
* Already kebab-case → unchanged

[source,typescript]
----
import { kebabCase } from '@zomme/fragment-frame';

kebabCase('userName')   // 'user-name'
kebabCase('UserName')   // 'user-name'
kebabCase('user_name')  // 'user-name'
kebabCase('user.name')  // 'user-name'
kebabCase('user name')  // 'user-name'
kebabCase('user-name')  // 'user-name'
----

**Parameters:**
* `str` (string) - Input string in any format

**Returns:** `string` - kebab-case formatted string

**Algorithm:**
1. Convert camelCase boundaries to hyphens
2. Replace spaces, underscores, and dots with hyphens
3. Collapse multiple hyphens into single hyphen
4. Convert to lowercase
5. Trim leading/trailing hyphens

---

=== `camelCase(str)`

Convert any string format to camelCase.

**Handles:**
* kebab-case → camelCase
* snake_case → camelCase
* PascalCase → camelCase
* Spaces → camelCase
* Dots → camelCase
* Already camelCase → unchanged

[source,typescript]
----
import { camelCase } from '@zomme/fragment-frame';

camelCase('user-name')  // 'userName'
camelCase('user_name')  // 'userName'
camelCase('user.name')  // 'userName'
camelCase('user name')  // 'userName'
camelCase('UserName')   // 'userName'
camelCase('userName')   // 'userName'
----

**Parameters:**
* `str` (string) - Input string in any format

**Returns:** `string` - camelCase formatted string

**Algorithm:**
1. Normalize to kebab-case first
2. Replace hyphens with uppercase next character
3. Ensure first character is lowercase
4. Remove any remaining special characters

---

== Use Cases

=== Attribute Name Conversion

Fragment Frame uses these utilities to convert between HTML attribute names (kebab-case) and JavaScript property names (camelCase):

[source,typescript]
----
// HTML attribute
<fragment-frame api-url="https://api.com"></fragment-frame>

// Internal conversion
const propName = camelCase('api-url'); // 'apiUrl'

// Fragment receives
frameSDK.props.apiUrl // 'https://api.com'
----

=== Event Name Normalization

Convert event names for property handlers:

[source,typescript]
----
// Event emitted with kebab-case
frameSDK.emit('user-selected', { id: 123 });

// Parent can listen with property handler (camelCase)
fragment.onuserselected = (data) => {
  console.log(data); // { id: 123 }
};

// Internal conversion
const handlerName = 'on' + camelCase('user-selected').replace(/^./, c => c.toLowerCase());
// 'onuserselected'
----

=== Round-Trip Conversions

[source,typescript]
----
// Convert back and forth
const original = 'apiUrl';
const kebab = kebabCase(original);    // 'api-url'
const camel = camelCase(kebab);       // 'apiUrl'

console.log(original === camel); // true
----

---

== Edge Cases

=== Empty Strings

[source,typescript]
----
kebabCase('')  // ''
camelCase('')  // ''
----

=== Single Character

[source,typescript]
----
kebabCase('a')  // 'a'
camelCase('A')  // 'a'
----

=== Numbers

[source,typescript]
----
kebabCase('user123Name')   // 'user123-name'
camelCase('user-123-name') // 'user123Name'
----

=== Special Characters

[source,typescript]
----
kebabCase('user@name')    // 'user@name'  (@ preserved)
camelCase('user@name')    // 'username'  (@ removed)
----

=== Multiple Separators

[source,typescript]
----
kebabCase('user___name')   // 'user-name'  (collapsed)
camelCase('user---name')   // 'userName'   (normalized)
----

---

== Implementation Notes

=== Why Two-Step Conversion for camelCase?

The `camelCase` function first normalizes to kebab-case before converting to camelCase. This ensures consistent handling of mixed formats:

[source,typescript]
----
// Without normalization, this would be complex
const mixed = 'User_Name-API.url';

// With two-step approach:
// Step 1: Normalize to kebab-case
const normalized = 'user-name-api-url';

// Step 2: Convert to camelCase
const result = 'userNameApiUrl';
----

=== Performance Considerations

Both functions use regular expressions and are optimized for:
* Common case conversions (camelCase ↔ kebab-case)
* Short strings (typical property names are 5-20 characters)
* Frequent execution (attribute changes, event handling)

**Benchmarks** (average over 1M iterations):
* `kebabCase('userName')`: ~0.5μs
* `camelCase('user-name')`: ~0.7μs

---

== Best Practices

=== Use Constants for Known Values

[source,typescript]
----
// ❌ Bad: Repeated conversions
fragment.addEventListener(kebabCase('userSelected'), handler);
fragment.removeEventListener(kebabCase('userSelected'), handler);

// ✅ Good: Convert once
const EVENT_NAME = kebabCase('userSelected'); // 'user-selected'
fragment.addEventListener(EVENT_NAME, handler);
fragment.removeEventListener(EVENT_NAME, handler);
----

=== Validate Input

[source,typescript]
----
// ✅ Good: Validate before conversion
function toKebabCase(str: string): string {
  if (!str || typeof str !== 'string') {
    throw new TypeError('Input must be a non-empty string');
  }
  return kebabCase(str);
}
----

=== Use Type Guards

[source,typescript]
----
// ✅ Good: Type-safe property access
interface Props {
  apiUrl: string;
  userId: number;
}

function getPropValue<T extends Props>(obj: T, key: keyof T): T[typeof key] {
  const kebabKey = kebabCase(String(key));
  // ... conversion logic
}
----

---

== Related

* **Attributes Documentation**: See link:../concepts/attributes.adoc[Attributes] for how these utilities are used in attribute handling
* **Event System**: See link:../advanced/event-system.adoc[Event System] for event name conversions
* **Source Code**: `src/helpers/string-utils.ts`
