= Solid Integration

Fragment Elements works with SolidJS applications.

== Parent Application (Solid)

=== Basic Usage

[source,tsx]
----
import '@micro-fe/fragment-elements/fragment-frame';
import { JSX } from 'solid-js';

function App() {
  return (
    <fragment-frame
      name="user-app"
      src="http://localhost:3001"
      base="/users"
      theme="dark"
    />
  );
}
----

=== Type-Safe Wrapper

[source,tsx]
----
import { onMount } from 'solid-js';
import type { FragmentFrame } from '@micro-fe/fragment-elements';

interface FragmentProps {
  apiUrl: string;
  name: string;
  src: string;
  theme: 'light' | 'dark';
}

export function Fragment(props: FragmentProps) {
  let fragmentRef: FragmentFrame | undefined;

  onMount(() => {
    if (!fragmentRef) return;
    fragmentRef.apiUrl = props.apiUrl;
    fragmentRef.theme = props.theme;
  });

  return (
    <fragment-frame
      ref={fragmentRef!}
      name={props.name}
      src={props.src}
    />
  );
}
----

=== Reactive Props

[source,tsx]
----
import { createSignal, createEffect } from 'solid-js';
import type { FragmentFrame } from '@micro-fe/fragment-elements';

function App() {
  const [theme, setTheme] = createSignal<'light' | 'dark'>('light');
  let fragmentRef: FragmentFrame | undefined;

  createEffect(() => {
    if (fragmentRef) {
      fragmentRef.theme = theme();
    }
  });

  return (
    <div>
      <button onClick={() => setTheme(theme() === 'light' ? 'dark' : 'light')}>
        Toggle Theme
      </button>
      <fragment-frame ref={fragmentRef!} name="app" src="http://localhost:3000" />
    </div>
  );
}
----

== Fragment Application (Solid)

=== Basic Setup

[source,tsx]
----
import { render } from 'solid-js/web';
import { frameSDK } from '@micro-fe/fragment-elements/sdk';

function App() {
  return (
    <div data-theme={frameSDK.props.theme}>
      <h1>Fragment: {frameSDK.props.name}</h1>
    </div>
  );
}

frameSDK.initialize().then(() => {
  render(() => <App />, document.getElementById('root')!);
});
----

=== Reactive Props

[source,tsx]
----
import { createSignal, createEffect, onMount } from 'solid-js';
import { frameSDK } from '@micro-fe/fragment-elements/sdk';

function App() {
  const [props, setProps] = createSignal(frameSDK.props);

  onMount(() => {
    frameSDK.on('attr:theme', (theme) => {
      setProps({ ...frameSDK.props });
    });
  });

  return (
    <div data-theme={props().theme}>
      <h1>Fragment: {props().name}</h1>
    </div>
  );
}
----
